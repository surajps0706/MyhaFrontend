<div class="track-order-container">
  <h2>Track Your Order</h2>

  <!-- ğŸ” Input Form -->
  <div class="form">
    <input type="text" placeholder="Enter Order ID" [(ngModel)]="orderId" />
    <!-- <input type="email" placeholder="Enter Email" [(ngModel)]="email" /> -->
    <button (click)="trackOrder()" [disabled]="loading">Track</button>
  </div>

  <!-- â³ Loading / Error -->
  <p *ngIf="loading" class="loading">â³ Checking your order...</p>
  <p *ngIf="error" class="error">{{ error }}</p>

  <!-- ğŸ“¦ Order Tracking -->
  <div *ngIf="order" class="order-details">
    <h3>Order Progress</h3>
    <p><strong>Order ID:</strong> {{ order.orderId }}</p>
    <p *ngIf="order.awb"><strong>AWB:</strong> {{ order.awb }}</p>

    <!-- =============================== -->
    <!-- â­ Horizontal Premium Progress -->
    <!-- =============================== -->
    <div class="progress-container">
      <div
        class="progress-step"
        *ngFor="let step of progressSteps; let i = index"
        [class.active]="isStepActive(step)"
        [class.completed]="isStepCompleted(step)"
      >
        <div class="circle">
          <!-- Icons by step -->
          <span *ngIf="step.includes('Pending')">ğŸ•’</span>
           <span *ngIf="step.includes('Ordered')">âš™ï¸</span>
          <span *ngIf="step.includes('Processing')">âš™ï¸</span>
          <span *ngIf="step.includes('Preparing')">ğŸ› ï¸</span>
          <span *ngIf="step.includes('Packed')">ğŸ“¦</span>
          <span *ngIf="step.includes('Shipped')">ğŸšš</span>
          <span *ngIf="step.includes('Transit')">ğŸ“</span>
          <span *ngIf="step.includes('Out for Delivery')">ğŸš€</span>
          <span *ngIf="step.includes('Delivered')">âœ…</span>
        </div>
        <span>{{ step }}</span>
      </div>
    </div>

    <!-- =============================== -->
    <!-- ğŸ“œ Detailed Vertical Timeline -->
    <!-- =============================== -->
    <div class="timeline">
      <div class="timeline-step" *ngFor="let step of animatedTimeline">
        <div class="circle small">âœ”</div>
        <div class="details">
          <div class="status">{{ step.status }}</div>
          <div class="time">{{ step.time | date:'mediumDate' }}</div>
          <!-- <div class="source">({{ step.source }})</div> -->
          <div class="location" *ngIf="step.location">ğŸ“ {{ step.location }}</div>
        </div>
      </div>
    </div>


    <!-- =============================== -->
<!-- ğŸ§¾ ORDER DETAILS (Customer + Items + Totals) -->
<!-- =============================== -->
<div class="full-order-info" *ngIf="order.checkoutData">

  <h3>Order Details</h3>

  <!-- Customer Info -->
  <div class="customer-info">
    <p><strong>Name:</strong> {{ order.checkoutData.name }}</p>
    <p><strong>Phone:</strong> {{ order.checkoutData.phone }}</p>
    <p><strong>Email:</strong> {{ order.checkoutData.email }}</p>
    <p>
      <strong>Address:</strong><br>
      {{ order.checkoutData.addressLine1 }},
      {{ order.checkoutData.addressLine2 }}<br>
      {{ order.checkoutData.city }},
      {{ order.checkoutData.state }} - {{ order.checkoutData.pincode }}
    </p>
  </div>

  <!-- Items -->
  <h4>Items</h4>
  <div class="item-card" *ngFor="let item of order.cartItems">
    <img [src]="item.image" class="item-img" />
    <div class="item-details">
      <p class="item-name">{{ item.name }}</p>
      <p>Qty: {{ item.quantity }}</p>
      <p>Base Price: â‚¹{{ item.price }}</p>

      <div *ngIf="item.sleeveType">
        Sleeve: {{ item.sleeveType }} (+â‚¹{{ item.sleevePrice }})
      </div>

      <div *ngIf="item.preferredHeight">
        Height: {{ item.preferredHeight }} (+â‚¹{{ item.extraHeightPrice }})
      </div>

      <p><strong>Total:</strong> â‚¹{{ item.lineTotal }}</p>
    </div>
  </div>

  <!-- Totals -->
  <h4>Price Summary</h4>
  <p><strong>Item Total:</strong> â‚¹{{ order.totalAmount }}</p>
  <p><strong>Shipping:</strong> â‚¹{{ order.shippingCost }}</p>

  <p class="gtotal">
    <strong>Grand Total:</strong> â‚¹{{ order.grandTotal }}
  </p>

</div>

  </div>
</div>
