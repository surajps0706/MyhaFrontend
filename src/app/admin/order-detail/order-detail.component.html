<div class="order-detail" *ngIf="order">
  <h2>ðŸ“‹ Order Details â€“ {{ order.orderId }}</h2>

  <!-- Customer Info -->
  <h3>Customer Info</h3>
  <p><b>Name:</b> {{ order.checkoutData?.name }}</p>
  <p><b>Phone:</b> {{ order.checkoutData?.phone }}</p>
  <p><b>Email:</b> {{ order.checkoutData?.email }}</p>
  <p><b>Address:</b>
    {{ order.checkoutData?.addressLine1 }},
    {{ order.checkoutData?.addressLine2 }},
    {{ order.checkoutData?.city }},
    {{ order.checkoutData?.state }} - {{ order.checkoutData?.pincode }}
  </p>

  <!-- Items -->
  <h3>Items</h3>
  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Details</th>
        <th>Qty</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of order.cartItems">
        <!-- Product Image -->
        <td>
          <img [src]="item.image || item.images?.[0]" width="60" />
        </td>

        <!-- Product Name + Customizations -->
        <td>{{ item.name }}</td>
        <td>
          <!-- Size -->
          <p *ngIf="item.selectedSize"><b>Size:</b> {{ item.selectedSize }}</p>

          <!-- Measurements -->
          <div *ngIf="item.measurements && objectKeys(item.measurements).length > 0">
            <b>Measurements:</b>
            <ul class="measurement-list">
             <ng-container *ngFor="let key of objectKeys(item.measurements)">
  <li *ngIf="item.measurements[key]?.trim()">
    {{ key }}: {{ item.measurements[key] }}
  </li>
</ng-container>

            </ul>
          </div>

          <!-- Sleeve -->
          <p *ngIf="item.sleeveType">
            <b>Sleeve:</b> {{ item.sleeveType }} 
            <span *ngIf="item.sleevePrice > 0"> (+â‚¹{{ item.sleevePrice }})</span>
          </p>

          <!-- Height -->
          <p *ngIf="item.preferredHeight">
            <b>Height:</b> {{ item.preferredHeight }} inches
            <span *ngIf="item.extraHeightPrice > 0"> (+â‚¹{{ item.extraHeightPrice }})</span>
          </p>

          <!-- Notes -->
          <p *ngIf="item.customizationNotes">
            <b>Notes:</b> {{ item.customizationNotes }}
          </p>
        </td>

        <!-- Qty & Price -->
        <td>{{ item.quantity }}</td>
        <td>â‚¹{{ item.lineTotal || item.price }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Status -->
 <!-- Status -->
<h3>Status</h3>
<p><b>Current:</b> {{ order.status }}</p>

<!-- Dropdown to update -->
<label for="status">Update Status:</label>
<select style="display: flex
;
    margin: 5px;" id="status" [(ngModel)]="selectedStatus">
  <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
</select>

<button (click)="updateStatus()" class="update-btn">Update</button>

<p><b>AWB:</b> {{ order.awb || 'â€”' }}</p>
<p><b>Placed On:</b> {{ order.createdAt | date:'mediumDate' }}</p>

</div>
